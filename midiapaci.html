<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mi DÃ­a - SomaFix</title>
    <link rel="stylesheet" href="css/mitodo.css">
</head>
<body>
    <div class="container">
        <h1>Â¿CÃ³mo ha ido tu dÃ­a?</h1>
        <form id="formDia">
            <h2>ðŸŸ  Dolor</h2>
            <label>Â¿CuÃ¡l ha sido el dolor mÃ­nimo que has tenido hoy? (0-10)</label>
            <input type="number" id="dolorMin" min="0" max="10" required>
            <label>Â¿CuÃ¡l ha sido el dolor mÃ¡ximo que has tenido hoy? (0-10)</label>
            <input type="number" id="dolorMax" min="0" max="10" required>
            <label>Â¿En quÃ© momento del dÃ­a has tenido el peor dolor?</label>
            <select id="momentoPeorDolor" required>
                <option value="">Selecciona</option>
                <option>MaÃ±ana (7hâ€“13h)</option>
                <option>MediodÃ­a (13hâ€“17h)</option>
                <option>Tarde (17hâ€“20h)</option>
                <option>Noche (20hâ€“24h)</option>
                <option>Madrugada (00hâ€“7h)</option>
            </select>
            <label>Â¿Durante cuÃ¡nto tiempo has tenido dolor hoy?</label>
            <select id="tiempoDolor" required>
                <option value="">Selecciona</option>
                <option>Menos de 30 minutos</option>
                <option>Entre 30 minutos y 2 horas</option>
                <option>MÃ¡s de 2 horas</option>
                <option>Todo el dÃ­a</option>
            </select>
            <label>Â¿CÃ³mo ha afectado el dolor a tus actividades diarias?</label>
            <select id="afectaActividades" required>
                <option value="">Selecciona</option>
                <option>Nada</option>
                <option>Poco</option>
                <option>Bastante</option>
                <option>Mucho</option>
            </select>
            <h2>ðŸŸ£ Estado emocional</h2>
            <label>Â¿CÃ³mo te has sentido emocionalmente hoy?</label>
            <select id="emocion" required>
                <option value="">Selecciona</option>
                <option>Tranquilo/a</option>
                <option>Ansioso/a</option>
                <option>Triste</option>
                <option>Irritable</option>
                <option>Feliz</option>
            </select>
            <label>Â¿Crees que la mÃºsica te ha ayudado a sentirte mejor hoy?</label>
            <select id="musicaAyuda" required>
                <option value="">Selecciona</option>
                <option>SÃ­</option>
                <option>No</option>
                <option>No estoy seguro/a</option>
            </select>
            <h2>ðŸ”µ Actividad y descanso</h2>
            <label>Â¿Has podido caminar o moverte con facilidad hoy?</label>
            <select id="movilidad" required>
                <option value="">Selecciona</option>
                <option>SÃ­</option>
                <option>Con dificultad</option>
                <option>No</option>
            </select>
            <label>Â¿CÃ³mo has dormido esta noche?</label>
            <select id="sueno" required>
                <option value="">Selecciona</option>
                <option>Muy bien</option>
                <option>Bien</option>
                <option>Mal</option>
                <option>No he podido dormir</option>
            </select>
            <h2>ðŸŸ¢ IntervenciÃ³n musical</h2>
            <label>Â¿Has escuchado mÃºsica hoy segÃºn las recomendaciones?</label>
            <select id="musicaHoy" required>
                <option value="">Selecciona</option>
                <option>SÃ­, durante todo el tiempo</option>
                <option>Un rato</option>
                <option>No</option>
            </select>
            <label>Â¿QuÃ© tipo de mÃºsica has escuchado?</label>
            <select id="tipoMusica" required>
                <option value="">Selecciona</option>
                <option>Relajante</option>
                <option>Alegre</option>
                <option>Triste</option>
                <option>Otro</option>
            </select>
            <input type="text" id="otroTipoMusica" placeholder="Si elegiste 'Otro', especifica aquÃ­">
            <label>DespuÃ©s de escuchar mÃºsica, Â¿cÃ³mo te has sentido?</label>
            <select id="despuesMusica" required>
                <option value="">Selecciona</option>
                <option>MÃ¡s tranquilo/a</option>
                <option>Igual</option>
                <option>MÃ¡s inquieto/a</option>
            </select>
            <label>Fecha</label>
            <input type="date" id="fecha" required>
            <button class="btn" type="submit">Guardar</button>
        </form>
        <div id="mensaje"></div>
        <button class="btn" onclick="window.history.back()">Volver</button>
    </div>
    <script>
        document.getElementById('formDia').onsubmit = function(e) {
            e.preventDefault();
            let nombre = localStorage.getItem('sesionNombre');
            let fecha = document.getElementById('fecha').value;
            let registro = {
                dolorMin: document.getElementById('dolorMin').value,
                dolorMax: document.getElementById('dolorMax').value,
                momentoPeorDolor: document.getElementById('momentoPeorDolor').value,
                tiempoDolor: document.getElementById('tiempoDolor').value,
                afectaActividades: document.getElementById('afectaActividades').value,
                emocion: document.getElementById('emocion').value,
                musicaAyuda: document.getElementById('musicaAyuda').value,
                movilidad: document.getElementById('movilidad').value,
                sueno: document.getElementById('sueno').value,
                musicaHoy: document.getElementById('musicaHoy').value,
                tipoMusica: document.getElementById('tipoMusica').value,
                otroTipoMusica: document.getElementById('otroTipoMusica').value,
                despuesMusica: document.getElementById('despuesMusica').value
            };
            let key = "calendario_" + nombre + "_" + fecha;
            let lista = JSON.parse(localStorage.getItem(key) || "[]");
            lista.push(registro);
            localStorage.setItem(key, JSON.stringify(lista));
            document.getElementById('mensaje').textContent = "Â¡Tu dÃ­a ha sido registrado!";
            document.getElementById('formDia').reset();
        }
    </script>
</body>
</html>
